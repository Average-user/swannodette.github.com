---
layout: post
title: "ClojureScript Source Maps"
description: ""
category: 
tags: []
---
{% include JB/setup %}

ClojureScript has had experimental
[source map](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)
support for quite a long time. Unlike other transpile to JavaScript
languages, ClojureScript source maps actually map all the way through Google
Closure advanced compilation! However until a fantastic patch by
[Sean Grove](http://twitter.com/sgrove) landed this weekend, the
support suffered from inaccuracy. Sean fixed an off by one bug as well
the necessary changes to the compiler to track function parameters and
let bindings. There's likely more issues but the only way to find out
is to give it a try and file some bug reports!

In order to enable source maps your project.clj should look something
like this:

```
(defproject example "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.5.1"]
                 [org.clojure/clojurescript "0.0-1889"]]

  :plugins [[lein-cljsbuild "0.3.2"]]

  :cljsbuild
  {:builds
   [{:id "advanced"
     :source-paths ["src/example"]
     :compiler {:optimizations :advanced
                :pretty-print false
                :output-dir "out"
                :output-to "main.js"
                :source-map "main.js.map"}}]}) ;; << ADD THIS
```

Currently the source map generated by the ClojureScript compiler uses
full paths for the files. How to best configure this is up for
discussion as some files live in JARs and ClojureScript doesn't always
write out these files to `:output-dir`. Perhaps it should but that's
the kind of feedback we're looking for and the type of patches we're
interested in.

In the meantime you can still test out the feature as we've hacked the
ClojureScript browser REPL web server to handle serving files from
JARs and elsewhere! So just make sure source maps are enabled in your
browser of choice, run `lein trampoline cljsbuild repl-listen` and
point your browser at `http://localhost:9000`.

If you run into issues please let us know on the
[ClojureScript mailing list](http://groups.google.com/forum/#!forum/clojurescript)
or the Clojure IRC cannnel.
